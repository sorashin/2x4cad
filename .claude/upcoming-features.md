# このあと追加を予定している機能

## 基本操作の拡充

### 角材の追加・削除・編集
- [ ] 角材の追加：メニューから角材の種類（2x4,1x4 etc）を選択し、１回目にクリックした点を始点、２回目にクリックした点を終点として、角材を作成する
- [ ] 選択した角材を伸縮させる：角材を選択し、出現した方向の矢印（１つの角材につき２方向）に向かってmeshを伸縮させる
- [ ] 選択した角材を削除する（delキー）
- [ ] 削除確認ダイアログ（オプション）


### スナップ機能
- [ ] グリッドスナップ（10cm単位）
- [ ] オブジェクトスナップ（角材の端点・中点）
- [ ] 角度スナップ（15度/45度/90度）
- [ ] スナップのオン/オフ切り替え（Shift長押し）
- [ ] グリッドスナップ・オブジェクトスナップは、角材の追加時、伸縮、移動時に適用
- [ ] 確度スナップは角材の回転時に適用

### カメラ視点の切り替え
- [ ] 正面図（Front View）
- [ ] 側面図（Side View）
- [ ] 上面図（Top View）
- [ ] アイソメトリック図（Isometric View）
- [ ] ショートカットキー（1/2/3/4）で切り替え
- [ ] アニメーション遷移

### カメラ操作（Rhinoスタイル）
- [ ] 右クリックで回転（現在実装済み）
- [ ] Shift + 右クリックでパン（MacでShiftキーの検知が正しく動作しない問題あり、要修正）

## プロジェクト管理

### プロジェクトの保存・読み込み
- [ ] JSONフォーマットでプロジェクトデータを保存
- [ ] LocalStorageへの自動保存
- [ ] ファイルダウンロード（.2x4cad形式）
- [ ] ファイルアップロード（ドラッグ&ドロップ対応）
- [ ] プロジェクトメタデータ（名前/作成日時/更新日時）

```typescript
interface Project {
  version: string;
  lumbers: Record<string, Lumber>;
  metadata: {
    name: string;
    createdAt: number;
    updatedAt: number;
  };
}
```

### テンプレート機能
- [ ] よく使う構造（壁/床/屋根等）をテンプレート化
- [ ] テンプレートライブラリ(.json形式で保存)
- [ ] カスタムテンプレートの保存
- [ ] カスタムテンプレートの呼び出し

## 角材管理の強化


### 角材のプロパティ編集
- [ ] 長さの直接入力
- [ ] 位置座標の直接入力
- [ ] 回転角度の直接入力


### 材料リスト（Cut List）
- [ ] 使用している角材の一覧表示
- [ ] 角材タイプごとの集計
- [ ] 必要な長さの計算
- [ ] CSVエクスポート

```
2x4材 1000mm x 10本
2x4材 500mm x 5本
1x4材 800mm x 3本
```

## 接続機能

### 角材同士の接続
- [ ] 接続タイプの設定（ビス止め/金具/接触のみ）
- [ ] 自動接続検出（距離閾値）
- [ ] 接続点の可視化（マーカー表示）
- [ ] 接続線の描画
- [ ] 接続情報パネル

### 接続に基づく操作
- [ ] 接続グループの一括選択
- [ ] 接続されている角材の連鎖移動


## 計測・寸法

### 寸法線の表示
- [ ] 角材の長さを表示
- [ ] 角材間の距離を表示
- [ ] 角度の表示
- [ ] 寸法線のスタイル設定（色/フォントサイズ）

### 計測ツール
- [ ] 2点間距離の計測
- [ ] 角度の計測
- [ ] 面積の計測
- [ ] 体積の計算（材積計算）

## エクスポート機能

### 3Dモデルのエクスポート
- [ ] STL形式（3Dプリント用）
- [ ] DXF形式（2D図面）

### 図面のエクスポート
- [ ] 正面図のPNG/SVGエクスポート
- [ ] 側面図のPNG/SVGエクスポート
- [ ] 上面図のPNG/SVGエクスポート
- [ ] 寸法線付き図面のPDFエクスポート

### BOM（部品表）のエクスポート
- [ ] 材料リストのCSVエクスポート
- [ ] 価格計算機能
- [ ] 購入リストの生成

## UI/UX改善

### ツールバーの実装
- [ ] 左側に配置するツールパレット
- [ ] 角材追加ボタン
- [ ] 操作モード切り替えボタン
- [ ] 表示設定（グリッド/軸/寸法線）

### プロパティパネル
- [ ] 右側に配置する詳細設定パネル
- [ ] 選択中の角材の情報表示
- [ ] プロパティの編集
- [ ] 履歴リストの表示

### ステータスバー
- [ ] 下部に配置する情報バー
- [ ] 選択数の表示
- [ ] 座標の表示
- [ ] モード表示

### コンテキストメニュー
- [ ] 右クリックメニュー
- [ ] 角材の複製/削除
- [ ] プロパティ表示

## パフォーマンス最適化

### 大量の角材を扱う際の最適化
- [ ] インスタンシング（同じ角材タイプをまとめて描画）
- [ ] フラスタムカリング（画面外の角材は描画しない）
- [ ] LOD（遠くの角材は簡略化）

### メモリ管理
- [ ] UNDO/REDO履歴の上限設定
- [ ] 不要な履歴のガベージコレクション

## 高度な機能（将来的に）

### 構造解析
- [ ] 簡易的な荷重計算
- [ ] 強度の可視化
- [ ] 警告表示（推奨されない構造）

### コラボレーション機能
- [ ] プロジェクトの共有
- [ ] リアルタイム共同編集
- [ ] コメント機能

### AIアシスト
- [ ] 構造の自動提案
- [ ] 最適化の提案
- [ ] 類似プロジェクトの検索

## ショートカット一覧（予定）

### 基本操作
- `Ctrl/Cmd + Z`: 元に戻す
- `Ctrl/Cmd + Shift + Z`: やり直す
- `Ctrl/Cmd + C`: コピー
- `Ctrl/Cmd + V`: ペースト
- `Delete / Backspace`: 削除
- `Ctrl/Cmd + A`: すべて選択
- `Escape`: 選択解除

### 表示操作
- `T`: 移動モード
- `R`: 回転モード
- `E`: スケール（伸縮）モード
- `1`: 正面図
- `2`: 側面図
- `3`: 上面図
- `4`: 上面図（別角度）
- `G`: グリッド表示切り替え
- `D`: 寸法線表示切り替え

### プロジェクト
- `Ctrl/Cmd + S`: 保存
- `Ctrl/Cmd + O`: 開く
- `Ctrl/Cmd + N`: 新規プロジェクト
